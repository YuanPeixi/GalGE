<Window x:Class="GalEngineSample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="GalEngine Sample" Height="720" Width="1280">
    <Grid>
        <!-- 背景 -->
        <Image x:Name="BackgroundImage" Stretch="UniformToFill" />

        <!-- 角色层（使用 Canvas 来放多个角色） -->
        <Canvas x:Name="CharacterCanvas" IsHitTestVisible="False" />

        <!-- 底部文本框 -->
        <Border Background="#EE000000" Height="220" VerticalAlignment="Bottom">
            <Grid Margin="12">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock x:Name="SpeakerText" Foreground="White" FontWeight="Bold" FontSize="20"/>
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <TextBlock x:Name="DialogueText" TextWrapping="Wrap" Foreground="White" FontSize="18"/>
                </ScrollViewer>

                <!-- 底部控制区：左侧为选项列表（竖直排列/自动换行），右侧为下一句按钮 -->
                <Grid Grid.Row="2" Margin="0,8,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!-- 选项区：使用 WrapPanel 包裹按钮，支持多列换行 -->
                    <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Disabled" HorizontalScrollBarVisibility="Auto">
                        <ItemsControl x:Name="OptionsPanel">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel Orientation="Vertical" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button x:Name="NextButton" Content="下一句" Margin="8,0,0,0" Click="NextButton_Click" MinWidth="120" MinHeight="36"/>
                    </StackPanel>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</Window>